



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="apple-touch-icon" sizes="180x180" href="../assets/images/apple-touch-icon.png">
      <link rel="icon" type="image/png" sizes="32x32" href="../assets/images/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="../assets/images/favicon-16x16.png">
      <link rel="manifest" href="../assets/images/manifest.json">
      <link rel="mask-icon" href="../assets/images/safari-pinned-tab.svg" color="#5bbad5">
      <link rel="shortcut icon" href="../assets/images/favicon.ico">
      <meta name="msapplication-config" content="../assets/images/browserconfig.xml">
      <meta name="theme-color" content="#ffffff">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.3">
    
    
      
        <title>Usage - AjaxUpload</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.7751c74c.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,400i,700,700i|Dosis:300,400,700|Ubuntu+Mono:400,700">
        <style>body,input{font-family:"Dosis","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="416"
    viewBox="0 0 416 416" id="github">
<path fill="currentColor" d="M207.988,0C93.127,0,0,93.139,0,208.023c0,91.894,59.595,169.854,142.271,197.362c10.389,1.908,14.191-4.514,14.191-10.024
	c0-4.938-0.175-18.021-0.274-35.378c-57.861,12.559-70.069-27.896-70.069-27.896c-9.466-24.029-23.096-30.427-23.096-30.427
	c-18.892-12.906,1.422-12.646,1.422-12.646c20.889,1.474,31.861,21.448,31.861,21.448c18.555,31.774,48.683,22.608,60.542,17.284
	c1.896-13.443,7.271-22.608,13.206-27.81c-46.188-5.25-94.747-23.096-94.747-102.804c0-22.708,8.105-41.274,21.411-55.815
	c-2.132-5.262-9.278-26.41,2.045-55.055c0,0,17.471-5.588,57.188,21.323c16.599-4.603,34.394-6.935,52.074-7.009
	c17.657,0.074,35.466,2.406,52.075,7.009c39.717-26.911,57.15-21.323,57.15-21.323c11.348,28.631,4.202,49.779,2.058,55.055
	c13.331,14.541,21.386,33.107,21.386,55.815c0,79.908-48.646,97.49-94.982,102.642c7.47,6.423,14.128,19.115,14.128,38.521
	c0,27.81-0.262,50.242-0.262,57.062c0,5.573,3.739,12.032,14.303,10.001C356.456,377.805,416,299.892,416,208.023
	C416.013,93.139,322.874,0,207.988,0z"/>
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#how-it-works" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="AjaxUpload" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                AjaxUpload
              </span>
              <span class="md-header-nav__topic">
                Usage
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/Jako/AjaxUpload/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Jako/AjaxUpload
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    AjaxUpload
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/Jako/AjaxUpload/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Jako/AjaxUpload
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Description" class="md-nav__link">
      Description
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Usage
      </label>
    
    <a href="./" title="Usage" class="md-nav__link md-nav__link--active">
      Usage
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-it-works" title="How it works" class="md-nav__link">
    How it works
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#display-the-upload-button" title="Display the Upload Button" class="md-nav__link">
    Display the Upload Button
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-and-retrieve-the-upload-queue" title="Set and retrieve the upload queue" class="md-nav__link">
    Set and retrieve the upload queue
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attach-the-uploaded-files-to-a-mail" title="Attach the uploaded files to a mail" class="md-nav__link">
    Attach the uploaded files to a mail
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-settings" title="System Settings" class="md-nav__link">
    System Settings
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contributors/" title="Contributors" class="md-nav__link">
      Contributors
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../donate/" title="Donate" class="md-nav__link">
      Donate
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-it-works" title="How it works" class="md-nav__link">
    How it works
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#display-the-upload-button" title="Display the Upload Button" class="md-nav__link">
    Display the Upload Button
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-and-retrieve-the-upload-queue" title="Set and retrieve the upload queue" class="md-nav__link">
    Set and retrieve the upload queue
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attach-the-uploaded-files-to-a-mail" title="Attach the uploaded files to a mail" class="md-nav__link">
    Attach the uploaded files to a mail
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-settings" title="System Settings" class="md-nav__link">
    System Settings
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Jako/AjaxUpload/tree/master/docs/usage.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Usage</h1>
                
                <h2 id="how-it-works">How it works<a class="headerlink" href="#how-it-works" title="Permanent link">&para;</a></h2>
<p>Ajaxupload generates an upload button for uploading multiple files with progress
counter in FormIt forms. Works well in FF3.6+, Safari4+, Chrome and falls back to
hidden iframe based upload in other browsers, providing good user experience
everywhere.</p>
<p>All uploaded files and generated thumbnails are given random filenames to avoid
hotlinking uploaded not published files. Automatic thumbnail generation for
uploaded jpeg, png and gif files. Other uploaded files will get a generic icon
the file extension.</p>
<p>The package contains FormIt hooks for prefilling the upload queue from a FormIt
field value and be save the upload queue into a FormIt field value after a form
submission. A third FormIt hook could attach the uploaded files to the FormIt
mails.</p>
<h2 id="display-the-upload-button">Display the Upload Button<a class="headerlink" href="#display-the-upload-button" title="Permanent link">&para;</a></h2>
<p>To display the upload button, you have to insert the <em>AjaxUpload snippet</em> call
somewhere in a Resource. If you want to use it with FormIt, you should place the
snippet call in the FormIt form:</p>
<pre class="highlight"><code>[[!AjaxUpload?
&amp;uid=`image`
&amp;allowedExtensions=`jpg,jpeg,png,gif`
&amp;thumbX=`75`
&amp;thumbY=`75`
]]</code></pre>

<p>The <em>AjaxUpload snippet</em> call could use the following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>uid</td>
<td>Unique upload queue id <sup id="fnref2:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup></td>
<td>md5 of MODX 'site_url' setting and the current resource id</td>
</tr>
<tr>
<td>language</td>
<td>Snippet/Javascript language</td>
<td>-</td>
</tr>
<tr>
<td>allowedExtensions</td>
<td>Allowed file extensions for upload</td>
<td>jpg,jpeg,png,gif</td>
</tr>
<tr>
<td>maxFilesizeMb</td>
<td>Maximum size for one file to upload</td>
<td>8</td>
</tr>
<tr>
<td>maxFiles</td>
<td>Maximum count of files to upload</td>
<td>3</td>
</tr>
<tr>
<td>thumbX</td>
<td>Horizontal size of generated thumb</td>
<td>100</td>
</tr>
<tr>
<td>thumbY</td>
<td>Vertical size of generated thumb</td>
<td>100</td>
</tr>
<tr>
<td>addJquery</td>
<td>Add jQuery script at the end of the body</td>
<td>0 (No)</td>
</tr>
<tr>
<td>addJscript</td>
<td>Add the snippet javascript and the fileuploader script at the end of the body</td>
<td>1 (Yes)</td>
</tr>
<tr>
<td>addCss</td>
<td>Add the snippet css at the end of the head</td>
<td>1 (Yes)</td>
</tr>
</tbody>
</table>
<p>If you want to change the text output in the upload section (i.e. the upload
button), you have to edit the MODX lexicon in the namespace <code>ajaxupload</code>.</p>
<h2 id="set-and-retrieve-the-upload-queue">Set and retrieve the upload queue<a class="headerlink" href="#set-and-retrieve-the-upload-queue" title="Permanent link">&para;</a></h2>
<p>To set/retreive the uploaded images in the upload queue by FormIt, you have to
use the FormIt hooks in the <em>FormIt snippet</em> call:</p>
<pre class="highlight"><code>[[!FormIt?
...
&amp;preHooks=`Formit2AjaxUpload`
&amp;hooks=`AjaxUpload2Formit`
&amp;ajaxuploadFieldname=`image`
&amp;ajaxuploadTarget=`images/user/`
&amp;ajaxuploadUid=`image`
...
]]</code></pre>

<p>The AjaxUpload2Formit and the Formit2AjaxUpload hook use almost the same properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>ajaxuploadUid</td>
<td>Unique upload queue id <sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup></td>
<td>md5 of MODX site_url setting and the current resource id</td>
</tr>
<tr>
<td>ajaxuploadFieldname</td>
<td>(required) FormIt field, the filenames/paths of the (already) uploaded files are saved in</td>
<td>-</td>
</tr>
<tr>
<td>ajaxuploadTarget</td>
<td>(required) Target path for the (already) uploaded files (relative to $modx-&gt;getOption['assetsPath']). The folder should exist or should be createable and it has to be writable for PHP.</td>
<td>-</td>
</tr>
<tr>
<td>ajaxuploadFieldformat</td>
<td>Format of the data saved in ajaxuploadFieldname</td>
<td>csv</td>
</tr>
</tbody>
</table>
<p>The AjaxUpload2Formit hook uses additional properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>ajaxuploadClearQueue</td>
<td>Clear the upload queue after a sucessful run of the hook</td>
<td>0 (No)</td>
</tr>
<tr>
<td>ajaxuploadAllowOverwrite</td>
<td>Allow overwrite of existing files with the same filename</td>
<td>1 (Yes)</td>
</tr>
</tbody>
</table>
<h2 id="attach-the-uploaded-files-to-a-mail">Attach the uploaded files to a mail<a class="headerlink" href="#attach-the-uploaded-files-to-a-mail" title="Permanent link">&para;</a></h2>
<p>If you want to attach the uploaded files to the email, you have to add the
AjaxUploadAttachments hook to the FormIt Call before the email hook:</p>
<pre class="highlight"><code>[[!FormIt?
...
&amp;hooks=`AjaxUpload2Formit,AjaxUploadAttachments,email`
]]</code></pre>

<p>The AjaxUploadAttachments hook uses the properties of the hooks above.</p>
<h2 id="system-settings">System Settings<a class="headerlink" href="#system-settings" title="Permanent link">&para;</a></h2>
<p>AjaxUpload uses the following system settings in the namespace <code>ajaxupload</code>:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>ajaxupload.cache_expires</td>
<td>Expire Time of the AjaxUpload cache (in hours)</td>
<td>4</td>
</tr>
</tbody>
</table>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>The parameter uid should be set different for each upload button on the site to separate multiple upload queues.&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../installation/" title="Installation" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Installation
              </span>
            </div>
          </a>
        
        
          <a href="../contributors/" title="Contributors" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Contributors
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div>&copy; 2013-2020 <a href="https://treehillstudio.com">Treehill Studio</a></div>
        
        <div>powered by
          <a href="http://www.mkdocs.org" title="MkDocs">
            MkDocs
          </a>
          and
          <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
            Material for MkDocs
          </a>
        </div>
      </div>
      
        
      
      <div class="md-footer-logo">
        <a href="https://treehillstudio.com" class="md-footer-logo__link">
          <img src="../assets/images/treehillstudio_logo.70585d71.svg" width="119" height="30">
        </a>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.7a2deab3.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
    
    
      
      
        <script>var _paq=_paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="//matomo.partout.info/";_paq.push(["setTrackerUrl",e+"piwik.php"]),_paq.push(["setSiteId","14"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.defer=!0,t.src=e+"piwik.js",p.parentNode.insertBefore(t,p)}()</script>
<noscript><p><img src="//matomo.partout.info/piwik.php?idsite=14&rec=1" style="border:0" alt=""></p></noscript>
      
    
  </body>
</html>